{{ define "discord.server.down" }}
{{ if gt (len .Alerts) 0 }}
🚨 **SERVEUR TOMBÉ - BenevoClic**

**⚠️ URGENCE: Le serveur est inaccessible !**

**Résumé:** {{ .CommonAnnotations.summary }}
**Description:** {{ .CommonAnnotations.description }}
**Sévérité:** {{ .CommonLabels.severity }}
**Service:** {{ .CommonLabels.service }}

**Détails de l'incident:**
{{ range .Alerts }}
• **Instance:** {{ .Labels.instance }}
• **Status:** {{ .Status }}
• **Durée:** {{ .StartsAt | since }}
{{ end }}

**Actions requises:**
• 🔍 Vérifier l'état du serveur
• 🔄 Redémarrer les services si nécessaire
• 📞 Contacter l'équipe technique

**Liens utiles:**
• 📊 [Prometheus](http://151.80.152.63:9090)
• 📈 [Grafana](http://151.80.152.63:3001)
• 🔍 [API Health](http://151.80.152.63:3000/health)

---
*🚨 ALERTE CRITIQUE - Serveur Down*
{{ end }}
{{ end }}

{{ define "discord.server.up" }}
{{ if gt (len .Alerts) 0 }}
✅ **SERVEUR RÉTABLI - BenevoClic**

**🎉 BONNE NOUVELLE: Le serveur est de nouveau opérationnel !**

**Résumé:** {{ .CommonAnnotations.summary }}
**Description:** {{ .CommonAnnotations.description }}
**Sévérité:** {{ .CommonLabels.severity }}
**Service:** {{ .CommonLabels.service }}

**Détails de la récupération:**
{{ range .Alerts }}
• **Instance:** {{ .Labels.instance }}
• **Status:** {{ .Status }}
• **Durée de l'incident:** {{ .StartsAt | since }} - {{ .EndsAt | since }}
{{ end }}

**Services rétablis:**
• ✅ API BenevoClic
• ✅ Monitoring Prometheus
• ✅ Alertes Discord
• ✅ Dashboards Grafana

**Liens utiles:**
• 📊 [Prometheus](http://151.80.152.63:9090)
• 📈 [Grafana](http://151.80.152.63:3001)
• 🔍 [API Health](http://151.80.152.63:3000/health)

---
*✅ RÉCUPÉRATION - Serveur Opérationnel*
{{ end }}
{{ end }}

{{ define "discord.server.inactive" }}
{{ if gt (len .Alerts) 0 }}
⚠️ **SERVEUR INACTIF - BenevoClic**

**📉 ATTENTION: Le serveur est inactif depuis trop longtemps !**

**Résumé:** {{ .CommonAnnotations.summary }}
**Description:** {{ .CommonAnnotations.description }}
**Sévérité:** {{ .CommonLabels.severity }}
**Service:** {{ .CommonLabels.service }}

**Détails de l'inactivité:**
{{ range .Alerts }}
• **Instance:** {{ .Labels.instance }}
• **Status:** {{ .Status }}
• **Durée d'inactivité:** {{ .StartsAt | since }}
• **Dernière activité:** {{ .Annotations.last_activity | default "Inconnue" }}
{{ end }}

**Causes possibles:**
• 🔌 Problème de connectivité réseau
• 💾 Surcharge du serveur
• 🔄 Service en cours de redémarrage
• ⚡ Problème d'alimentation

**Actions recommandées:**
• 🔍 Vérifier la connectivité
• 📊 Consulter les métriques système
• 🔄 Redémarrer si nécessaire

**Liens utiles:**
• 📊 [Prometheus](http://151.80.152.63:9090)
• 📈 [Grafana](http://151.80.152.63:3001)
• 🔍 [API Health](http://151.80.152.63:3000/health)

---
*⚠️ ALERTE INACTIVITÉ - Surveillance Requise*
{{ end }}
{{ end }}

{{ define "discord.benevoclic.message" }}
{{ if gt (len .Alerts) 0 }}
🚨 **Alerte BenevoClic**

**Résumé:** {{ .CommonAnnotations.summary }}
**Description:** {{ .CommonAnnotations.description }}
**Sévérité:** {{ .CommonLabels.severity }}
**Service:** {{ .CommonLabels.service }}

**Détails:**
{{ range .Alerts }}
• **Instance:** {{ .Labels.instance }}
• **Valeur:** {{ .Annotations.value }}
• **Status:** {{ .Status }}
{{ end }}

**Liens utiles:**
• 📊 [Prometheus](http://151.80.152.63:9090)
• 📈 [Grafana](http://151.80.152.63:3001)
• 🔍 [API Health](http://151.80.152.63:3000/health)

---
*Alertmanager - BenevoClic Monitoring*
{{ end }}
{{ end }}